{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,mBCAlF,MAAM,EAA+BI,OAAOC,KAAKC,OAAO,a,aCAnBF,OAAOC,KAAKC,OAAe,OAAhE,MCAM,EAA+BF,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,iC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,6B,aCKxDC,IAAAA,aAAiBC,IAAI,mBAAmB,WCDzB,IACPC,GCCNC,EAAAA,EAAAA,QAAOC,IAAAA,UAAwB,iBAAiB,SAA8BC,GAAO,IAAAC,EAAA,KACnFD,EAAMJ,IACJ,iBACAM,EAAE,cAAe,CACfA,EAAE,0CACAP,IAAAA,WAAeQ,MAAM,6EAEvBD,EAAE,0BAA2B,CAC3BA,EAAEE,IAAQ,CACRC,MAAOC,KAAKC,KAAKC,cAAcC,eAC/BC,SAAU,SAACC,GACTV,EAAKW,uBAAwB,EAC7BX,EAAKM,KAAKM,gBAAgB,CAAEJ,eAAgBE,IAASG,MAAK,WACxDb,EAAKW,uBAAwB,EAC7BV,EAAEa,QACJ,GACF,EACAC,QAASV,KAAKM,uBACbjB,IAAAA,WAAeQ,MAAM,mFAE1BD,EAAE,YACAP,IAAAA,WAAeQ,MAAM,4EAI7B,KD1BMN,EAAQoB,SAASC,cAAc,UAC/BC,YAAc,6CACpBF,SAASG,KAAKC,YAAYxB,IAE1BC,EAAAA,EAAAA,QAAOwB,IAAAA,UAAoB,YAAY,WAAY,IAAAC,EAAAC,EAAAC,EAAAC,EAC3CC,GAA8D,KAAlC,OAATJ,EAAAjB,KAAKC,WAAI,EAATgB,EAAWK,UAAU,mBACxCC,GAAgC,OAAhBL,EAAA7B,IAAAA,QAAYY,WAAI,EAAhBiB,EAAkBM,SAAkB,OAAdL,EAAKnB,KAAKC,WAAI,EAATkB,EAAWK,MACtDC,EAA0B,OAAnBL,EAAG/B,IAAAA,QAAYY,WAAI,EAAhBmB,EAAkBK,UAGlC,IAF6BJ,GAAqBE,GAAkBE,EAGlElC,EAAMsB,YAAc,OACf,CACLtB,EAAMsB,YAAc,6CAEEb,KAAK0B,QAAQC,iBAAiB,iBACtCC,SAAQ,SAAAC,GACpBA,EAAMhB,YAAc,EACtB,IAEA,IAAMiB,EAAqB9B,KAAK0B,QAAQK,cAAc,kEAEhC,MAAlBD,GAAAA,EAAoBC,cAAc,OACpCD,EAAmBC,cAAc,KAAKlB,YAAcxB,IAAAA,WAAeQ,MAAM,yDAE7E,CACF,GDvBF,G","sources":["webpack://@huseyinfiliz/private-profile/webpack/bootstrap","webpack://@huseyinfiliz/private-profile/webpack/runtime/compat get default export","webpack://@huseyinfiliz/private-profile/webpack/runtime/define property getters","webpack://@huseyinfiliz/private-profile/webpack/runtime/hasOwnProperty shorthand","webpack://@huseyinfiliz/private-profile/external root \"flarum.core.compat['forum/app']\"","webpack://@huseyinfiliz/private-profile/external root \"flarum.core.compat['extend']\"","webpack://@huseyinfiliz/private-profile/external root \"flarum.core.compat['common/extend']\"","webpack://@huseyinfiliz/private-profile/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@huseyinfiliz/private-profile/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@huseyinfiliz/private-profile/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@huseyinfiliz/private-profile/./src/forum/index.js","webpack://@huseyinfiliz/private-profile/./src/forum/addPrivateProfileHandler.tsx","webpack://@huseyinfiliz/private-profile/./src/forum/addPrivateSettings.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/extend';\nimport addPrivateProfileSettings from './addPrivateSettings';\nimport addPrivateProfileHandler from './addPrivateProfileHandler';\n\napp.initializers.add('private-profile', () => {\n    addPrivateProfileSettings();\n    addPrivateProfileHandler();\n});","import { extend } from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport app from 'flarum/forum/app';\n\nexport default function () {\n  const style = document.createElement('style');\n  style.textContent = `.UserPage .Button-badge { display: none; }`;\n  document.body.appendChild(style);\n\n  extend(UserPage.prototype, 'onupdate', function () {\n    const isPrivateProfile = this.user?.attribute('privateProfile') === true;\n    const isCurrentUser = app.session.user?.id() === this.user?.id();\n    const isAdmin = app.session.user?.isAdmin();\n    const isUnauthorizedViewer = isPrivateProfile && !isCurrentUser && !isAdmin;\n\n    if (!isUnauthorizedViewer) {\n      style.textContent = '';\n    } else {\n      style.textContent = `.UserPage .Button-badge { display: none; }`;\n\n      const badgeElements = this.element.querySelectorAll('.Button-badge');\n      badgeElements.forEach(badge => {\n        badge.textContent = '';\n      });\n\n      const placeholderElement = this.element.querySelector('.PostsUserPage .Placeholder, .DiscussionsUserPage .Placeholder');\n\n      if (placeholderElement?.querySelector('p')) {\n        placeholderElement.querySelector('p').textContent = app.translator.trans('huseyinfiliz-private-profile.forum.profile_is_private');\n      }\n    }\n  });\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\nimport Switch from 'flarum/common/components/Switch';\n\nexport default function () {\n  extend(SettingsPage.prototype, 'settingsItems', function (this: SettingsPage, items) {\n    items.add(\n      'PrivateProfile',\n      m('.Form-group', [\n        m('label.SettingsPage-PrivateProfile-label', \n          app.translator.trans('huseyinfiliz-private-profile.forum.user.settings.private_profile_heading')\n        ),\n        m('.PrivateProfile-setting', [\n          m(Switch, {\n            state: this.user.preferences().PrivateProfile,\n            onchange: (value) => {\n              this.PrivateProfileLoading = true;\n              this.user.savePreferences({ PrivateProfile: value }).then(() => {\n                this.PrivateProfileLoading = false;\n                m.redraw();\n              });\n            },\n            loading: this.PrivateProfileLoading,\n          }, app.translator.trans('huseyinfiliz-private-profile.forum.user.settings.private_profile_description'))\n        ]),\n        m('.helpText', \n          app.translator.trans('huseyinfiliz-private-profile.forum.user.settings.private_profile_help')\n        )\n      ])\n    );\n  });\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","app","add","style","extend","SettingsPage","items","_this","m","trans","Switch","state","this","user","preferences","PrivateProfile","onchange","value","PrivateProfileLoading","savePreferences","then","redraw","loading","document","createElement","textContent","body","appendChild","UserPage","_this$user","_app$session$user","_this$user2","_app$session$user2","isPrivateProfile","attribute","isCurrentUser","id","isAdmin","element","querySelectorAll","forEach","badge","placeholderElement","querySelector"],"sourceRoot":""}
